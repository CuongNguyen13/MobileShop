	DROP DATABASE MOBILESHOP
	CREATE DATABASE MOBILESHOP;
	USE  MOBILESHOP;
	SET DATEFORMAT DMY;		
	--THONG TIN CHUNG CUA SHOP
	GO
	CREATE TABLE THONGTIN_SHOP(
	ID  NVARCHAR(10) NOT NULL,
	TENSHOP NVARCHAR(100) NOT NULL,
	CHINHSACH NVARCHAR(MAX) NOT NULL,
	DC_FB NVARCHAR(MAX) NULL,
	DC_YTB NVARCHAR(MAX) NULL,
	DC_THUC NVARCHAR(MAX) NOT NULL,
	)
	ALTER TABLE THONGTIN_SHOP ADD CONSTRAINT PK_TT_SHOP PRIMARY KEY (TENSHOP)
	GO
	CREATE TABLE SDT_SHOP(
	SDT INT NOT NULL,
	TIEUDE NVARCHAR(100) NOT NULL,
	GIO_HD NVARCHAR(100) NOT NULL,
	)
	ALTER TABLE SDT_SHOP ADD CONSTRAINT PK_SDT PRIMARY KEY (SDT)
	GO
	CREATE TABLE QL_GIAODIEN(
	MAGD CHAR(10) NOT NULL,
	MAU_NEN NVARCHAR(30) NOT NULL,
	MAU_CHUDAO NVARCHAR(30) NOT NULL,
	MAU_THANHLOC NVARCHAR(30) NOT NULL,
	MAU_CHU NVARCHAR(30) NOT NULL,
	)
	ALTER TABLE QL_GIAODIEN ADD CONSTRAINT PK_GD PRIMARY KEY (MAGD)
	CREATE TABLE ICON_MENU(
	MAIC CHAR(10) NOT NULL,
	ICON NVARCHAR(MAX) NOT NULL,
	TIEUDE NVARCHAR(20)NOT NULL
	)
	ALTER TABLE ICON_MENU ADD CONSTRAINT PK_IC PRIMARY KEY (MAIC)

	
	-- THONG TIN CO SO DU LIEU HE THONG
	GO
	--BANG NGUOI DUNG
	DROP TABLE TAIKHOAN
	CREATE TABLE TAIKHOAN(
	ID CHAR(10) NOT NULL,
	EMAIL NVARCHAR(100) NOT NULL,
	MATKHAU NVARCHAR(100)NOT  NULL,
	TRANGTHAI NVARCHAR(50)NOT  NULL,
	NGAYTAO DATE NOT NULL,
	QUYENHAN NVARCHAR(50) NOT NULL,
	TENND NVARCHAR(MAX)NOT  NULL,
	SDT INT NOT NULL,
	DIACHI NVARCHAR(100)NOT NULL,
	TOKENREMEMBER NVARCHAR(600) NULL,	
	)	
	ALTER TABLE TAIKHOAN ADD CONSTRAINT PK_MAKH PRIMARY KEY (ID)
	GO
	--BANG GIO HANG
	CREATE TABLE GIOHANG(
	MAKH CHAR(10) NOT NULL,
	MASP CHAR(10) NOT NULL,
	SL INT NOT NULL)
	
	ALTER TABLE GIOHANG ADD CONSTRAINT PK_GIOHANG PRIMARY KEY (MAKH,MASP)  
   -- BANG DANH GIA
	GO	
	CREATE TABLE DANHGIA(
	MASP  CHAR(10) NOT NULL,
	MAKH CHAR(10) NOT NULL,
	MUCDANHGIA CHAR(10) NOT NULL,
	NOIDUN_DG NVARCHAR(500) NOT NULL,
	NGAYDANHGIA DATE NOT NULL
	)
	ALTER TABLE DANHGIA ADD CONSTRAINT PK_DANHGIA_MASP PRIMARY KEY (MASP,MAKH)
	GO
	--BANG THUONG HIEU
	CREATE TABLE THUONGHIEU( 
	 MATH CHAR(10) NOT NULL,
	 TENTH NVARCHAR(100) NOT NULL,
	 SLDT INT NULL)
	ALTER TABLE THUONGHIEU ADD CONSTRAINT PR_MATH PRIMARY KEY (MATH)
	GO
	 -- BANG SAN PHAM
	CREATE TABLE SANPHAM(
	MASP CHAR(10) NOT NULL,
	TENSP NVARCHAR(500) NOT NULL,
	LOAI_SP NVARCHAR(100) NOT NULL,
	MATH CHAR(10) NOT NULL,
	TINHTRANG NVARCHAR(100) NOT NULL,
	NGAYCAPNHAT DATE NOT NULL,
	GIOITHIEU NVARCHAR(MAX) NOT NULL,
	SOLUONG INT NOT NULL,
	SL_DABAN INT NOT NULL,
	LUOTXEM INT NOT NULL,
	MACH CHAR(10) NOT NULL,	
	)
	ALTER TABLE SANPHAM ADD CONSTRAINT PK_SANPHAM_MASP PRIMARY KEY (MASP)
		GO
	--BANG BINH LUAN
	DROP TABLE BINHLUAN
	CREATE TABLE BINHLUAN(
	MABL CHAR(10) NOT NULL,
	TEN_NGUOIBL NVARCHAR(100) NOT NULL,
	NOIDUNG_BL NVARCHAR(500) NOT NULL,
	TRANGTHAI NVARCHAR(50) NOT NULL,
	NGAYBL DATE NOT NULL,
	MASP CHAR(10) NOT NULL,
	)
	
	ALTER TABLE BINHLUAN ADD CONSTRAINT PK_BL PRIMARY KEY(MABL)
	--BANG TRA LOI
	DROP TABLE TRALOI
	CREATE TABLE TRALOI(
	MATL CHAR(10) NOT NULL,
	TEN_NGUOITL NVARCHAR(100) NOT NULL,
	NOIDUNG_TL NVARCHAR(500) NOT NULL,
	LOAI_TL NVARCHAR(50) NOT NULL,
	TRANGTHAI NVARCHAR(50) NOT NULL,
	NGAYTL DATE NOT NULL,
		MABL CHAR(10) NOT NULL,
	)
	ALTER TABLE TRALOI ADD CONSTRAINT PK_TL PRIMARY KEY(MATL)
	-- BANG GIA
	GO
	CREATE TABLE GIA_SP(
	MASP CHAR(10) NOT NULL,
	NGAYCAPNHAT DATE NOT NULL,
	GIA MONEY NOT NULL,
	GIA_KM MONEY NULL
	)
	ALTER TABLE GIA_SP ADD CONSTRAINT PK_GIA_MASP_NGAY PRIMARY KEY(MASP,NGAYCAPNHAT)
	GO
	-- BANG CAU HINH
	CREATE TABLE CAUHINH(
	MACH CHAR(10) NOT NULL,
	SLTT INT NOT NULL,
	)
	GO
	ALTER TABLE CAUHINH ADD CONSTRAINT PR_CAUHINH PRIMARY KEY (MACH)
	-- BANG CAU HINH - CHI TIET THUOC TINH
	CREATE TABLE CH_CTTT(
	MACH CHAR(10) NOT NULL,
	MACT CHAR(10) NOT NULL,
	)
	GO
	ALTER TABLE CH_CTTT ADD CONSTRAINT PR_CH_CTTT PRIMARY KEY (MACH,MACT)
	-- BANG CHI TIET THUOC TINH
	CREATE TABLE CHITIET_THUOCTINH(
	MACT CHAR(10) NOT NULL,
	GIATRI NVARCHAR(50) NOT NULL,
	NOIDUNG NVARCHAR(MAX) NOT NULL,
	MATT CHAR(10) NOT NULL,
	)	
	ALTER TABLE CHITIET_THUOCTINH ADD CONSTRAINT PR_CHITIET_THUOCTINH PRIMARY KEY (MACT)
	GO
	-- BANG THUOC TINH
	CREATE TABLE THUOCTINH(
	MATT CHAR(10) NOT NULL,
	LOAI_GIATRI NVARCHAR(20) NOT NULL,
	NOIDUNG NVARCHAR(MAX)NOT NULL,
	)
	ALTER TABLE THUOCTINH ADD CONSTRAINT PR_THUOCTINH PRIMARY KEY (MATT)
	GO
	-- BANG LOC DU LIEU DUA TREN THUOC TINH
	CREATE TABLE LOCDULIEU(
	MATT_LOC CHAR(10) NOT NULL,
	MATT CHAR(10) NOT NULL
	)
	ALTER TABLE LOCDULIEU ADD CONSTRAINT PR_LOCDULIEU PRIMARY KEY (MATT_LOC)
	-- BANG GIA TRI DU LIEU DUOC LOC
	GO
	CREATE TABLE GIATRILOC(
	TIEUDE_LOC NVARCHAR(100) NOT NULL,
	GIATRILOC NVARCHAR(MAX) NOT NULL,
	MATT_LOC CHAR(10) NOT NULL
	)
	ALTER TABLE GIATRILOC ADD CONSTRAINT PR_GIATRILOC PRIMARY KEY (TIEUDE_LOC)
	GO
	-- BANG MAU SAC
	CREATE TABLE MAUSAC(
	MAMAU CHAR(10) NOT NULL,
	LOAIMAU NVARCHAR(50) NOT NULL,
	TENMAU  NVARCHAR(100) NOT NULL)
	ALTER TABLE MAUSAC ADD CONSTRAINT PK_MAUSAC_MAMAU PRIMARY KEY (MAMAU)
	GO
	-- BANG HINH ANH VA MAU SAC
	GO
	CREATE TABLE HINHANH(
	 MASP CHAR(10) NOT NULL,
	 MAMAU CHAR(10) NOT NULL,
	 ANH_NEN NVARCHAR(MAX) NOT NULL,
	 ANH_1 NVARCHAR(MAX) NOT NULL,
	 ANH_2 NVARCHAR(MAX) NOT NULL,
	 ANH_3 NVARCHAR(MAX) NOT NULL,
	 ANH_4 NVARCHAR(MAX) NOT NULL,
	 ANH_KHAC NVARCHAR(MAX)  NULL,
	 )
	ALTER TABLE HINHANH ADD CONSTRAINT PK_HINHANH_MASP_MAMAU PRIMARY KEY (MASP,MAMAU)
	GO
	-- BANG LUOT TRUY CAP
	CREATE TABLE LUOTTRUYCAP(
	NGAY DATE NOT NULL,
	SOLUOT INT NULL,
	)
	 ALTER TABLE LUOTTRUYCAP ADD CONSTRAINT PK_LUOTTRUYCAP_NGAY PRIMARY KEY (NGAY)
	GO
	--BANG DON HANG
	CREATE TABLE DONHANG(
	MADH CHAR(10) NOT NULL ,
	TENKH NVARCHAR(100) NOT NULL,
	DIACHI NVARCHAR(MAX) NOT NULL,
	SDT_DATHANG INT NOT NULL,
	TONGIA MONEY NOT NULL,
	NGAYLAP DATE NOT NULL,
	PT_THANHTOAN NVARCHAR(100) NOT NULL,
	TRANGTHAI NVARCHAR(100) NOT NULL,
	MAKH CHAR(10)  NULL 
	)
	ALTER TABLE DONHANG ADD CONSTRAINT PK_DONHANG_MADH PRIMARY KEY (MADH)
	go
	-- BANG CHI TIET DON HANG
	CREATE TABLE CTDH(
	MADH CHAR(10) NOT NULL,
	MASP CHAR(10) NOT NULL ,
	SOLUONG INT NOT NULL
	)
	ALTER TABLE CTDH ADD CONSTRAINT PK_CTDH_MADH_MASP PRIMARY KEY (MADH,MASP)
	CREATE TABLE PHANHOI(
	EMAIL NVARCHAR(100) NOT NULL,
	HOTEN NVARCHAR(100) NOT NULL,
	SDT INT NOT NULL,
	THOIGIAN DATE NOT NULL,
	LOINHAN NVARCHAR(MAX) NOT NULL,
	)
	ALTER TABLE PHANHOI ADD CONSTRAINT PK_PHANHOI PRIMARY KEY(EMAIL)
	
	--- ADD FOREIGN KEY
	ALTER TABLE SANPHAM ADD CONSTRAINT FK_SP_CH FOREIGN KEY (MACH) REFERENCES CAUHINH(MACH) 
	
	ALTER TABLE DANHGIA ADD CONSTRAINT FK_DG_SP FOREIGN KEY (MASP) REFERENCES SANPHAM(MASP)
	
	ALTER TABLE HINHANH ADD CONSTRAINT FK_SP_HA FOREIGN KEY (MASP) REFERENCES SANPHAM(MASP) 
	
	ALTER TABLE HINHANH ADD CONSTRAINT FK_MS_HA FOREIGN KEY (MAMAU) REFERENCES MAUSAC(MAMAU) 
	
	ALTER TABLE DONHANG ADD CONSTRAINT FK_DH_KH FOREIGN KEY (MAKH) REFERENCES TAIKHOAN(ID) 
	
	ALTER TABLE CTDH ADD CONSTRAINT FK_CTDH_DH FOREIGN KEY (MADH) REFERENCES DONHANG(MADH) 
	
	ALTER TABLE CTDH ADD CONSTRAINT FK_CTDH_SP FOREIGN KEY (MASP) REFERENCES SANPHAM(MASP) 
	
	ALTER TABLE SANPHAM ADD CONSTRAINT FK_TH_SP FOREIGN KEY (MATH) REFERENCES THUONGHIEU(MATH)
	
	ALTER TABLE CH_CTTT ADD CONSTRAINT FR_CH FOREIGN KEY (MACH) REFERENCES CAUHINH(MACH)
	
	ALTER TABLE CH_CTTT ADD CONSTRAINT FR_TT FOREIGN KEY (MACT) REFERENCES CHITIET_THUOCTINH(MACT)
	
	ALTER TABLE CHITIET_THUOCTINH ADD CONSTRAINT FR_CT_TT FOREIGN KEY (MATT) REFERENCES THUOCTINH(MATT)

	ALTER TABLE LOCDULIEU ADD CONSTRAINT FR_LOC FOREIGN KEY (MATT) REFERENCES THUOCTINH(MATT)

	ALTER TABLE GIATRILOC ADD CONSTRAINT FR_GIATRILOC FOREIGN KEY (MATT_LOC)REFERENCES LOCDULIEU(MATT_LOC)
	
	ALTER TABLE GIOHANG ADD CONSTRAINT FK_MASP_GIOHANG FOREIGN KEY(MASP)REFERENCES SANPHAM(MASP)
	
	ALTER TABLE GIOHANG ADD CONSTRAINT FK_MAKH_GIOHANG FOREIGN KEY(MAKH)REFERENCES TAIKHOAN(ID)
	
	ALTER TABLE GIA_SP ADD CONSTRAINT FK_GIA_MASP FOREIGN KEY (MASP) REFERENCES SANPHAM(MASP)
	
	ALTER TABLE BINHLUAN ADD CONSTRAINT FK_SP_BL FOREIGN KEY(MASP) REFERENCES SANPHAM(MASP)
		
	ALTER TABLE TRALOI ADD CONSTRAINT FK_TL_BL FOREIGN KEY (MABL) REFERENCES BINHLUAN(MABL)
	--INSERT VALUES
	SELECT * FROM BINHLUAN
	

-- Mật khẩu 123
select * from TAIKHOAN
INSERT INTO TAIKHOAN
VALUES('00','admin', '202cb962ac59075b964b07152d234b70','ENABLE','2005-12-11','ADMIN',N'Trần Thanh Bảo','0943417917',N'Bến Tre',NULL)